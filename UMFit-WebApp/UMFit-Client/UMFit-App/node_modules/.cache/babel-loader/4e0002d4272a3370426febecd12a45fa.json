{"ast":null,"code":"import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, d as createEvent, e as getElement, c as getIonMode, h, H as Host } from './core-0a8d4d2e.js';\nimport './config-3c7f3790.js';\nimport { e as debounce } from './helpers-46f4a262.js';\nimport { o as openURL, c as createColorClasses } from './theme-18cbe2cc.js';\n\nvar Route =\n/** @class */\nfunction () {\n  function Route(hostRef) {\n    registerInstance(this, hostRef);\n    /**\n     * Relative path that needs to match in order for this route to apply.\n     *\n     * Accepts paths similar to expressjs so that you can define parameters\n     * in the url /foo/:bar where bar would be available in incoming props.\n     */\n\n    this.url = '';\n    this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n  }\n\n  Route.prototype.onUpdate = function (newValue) {\n    this.ionRouteDataChanged.emit(newValue);\n  };\n\n  Route.prototype.onComponentProps = function (newValue, oldValue) {\n    if (newValue === oldValue) {\n      return;\n    }\n\n    var keys1 = newValue ? Object.keys(newValue) : [];\n    var keys2 = oldValue ? Object.keys(oldValue) : [];\n\n    if (keys1.length !== keys2.length) {\n      this.onUpdate(newValue);\n      return;\n    }\n\n    for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n      var key = keys1_1[_i];\n\n      if (newValue[key] !== oldValue[key]) {\n        this.onUpdate(newValue);\n        return;\n      }\n    }\n  };\n\n  Route.prototype.connectedCallback = function () {\n    this.ionRouteDataChanged.emit();\n  };\n\n  Object.defineProperty(Route, \"watchers\", {\n    get: function () {\n      return {\n        \"url\": [\"onUpdate\"],\n        \"component\": [\"onUpdate\"],\n        \"componentProps\": [\"onComponentProps\"]\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return Route;\n}();\n\nvar RouteRedirect =\n/** @class */\nfunction () {\n  function RouteRedirect(hostRef) {\n    registerInstance(this, hostRef);\n    this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n  }\n\n  RouteRedirect.prototype.propDidChange = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  RouteRedirect.prototype.connectedCallback = function () {\n    this.ionRouteRedirectChanged.emit();\n  };\n\n  Object.defineProperty(RouteRedirect, \"watchers\", {\n    get: function () {\n      return {\n        \"from\": [\"propDidChange\"],\n        \"to\": [\"propDidChange\"]\n      };\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return RouteRedirect;\n}();\n\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\n\nvar generatePath = function (segments) {\n  var path = segments.filter(function (s) {\n    return s.length > 0;\n  }).join('/');\n  return '/' + path;\n};\n\nvar chainToPath = function (chain) {\n  var path = [];\n\n  for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n    var route = chain_1[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var segment = _b[_a];\n\n      if (segment[0] === ':') {\n        var param = route.params && route.params[segment.slice(1)];\n\n        if (!param) {\n          return null;\n        }\n\n        path.push(param);\n      } else if (segment !== '') {\n        path.push(segment);\n      }\n    }\n  }\n\n  return path;\n};\n\nvar writePath = function (history, root, useHash, path, direction, state) {\n  var url = generatePath(__spreadArrays(parsePath(root), path));\n\n  if (useHash) {\n    url = '#' + url;\n  }\n\n  if (direction === ROUTER_INTENT_FORWARD) {\n    history.pushState(state, '', url);\n  } else {\n    history.replaceState(state, '', url);\n  }\n};\n\nvar removePrefix = function (prefix, path) {\n  if (prefix.length > path.length) {\n    return null;\n  }\n\n  if (prefix.length <= 1 && prefix[0] === '') {\n    return path;\n  }\n\n  for (var i = 0; i < prefix.length; i++) {\n    if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n      return null;\n    }\n  }\n\n  if (path.length === prefix.length) {\n    return [''];\n  }\n\n  return path.slice(prefix.length);\n};\n\nvar readPath = function (loc, root, useHash) {\n  var pathname = loc.pathname;\n\n  if (useHash) {\n    var hash = loc.hash;\n    pathname = hash[0] === '#' ? hash.slice(1) : '';\n  }\n\n  var prefix = parsePath(root);\n  var path = parsePath(pathname);\n  return removePrefix(prefix, path);\n};\n\nvar parsePath = function (path) {\n  if (path == null) {\n    return [''];\n  }\n\n  var segments = path.split('/').map(function (s) {\n    return s.trim();\n  }).filter(function (s) {\n    return s.length > 0;\n  });\n\n  if (segments.length === 0) {\n    return [''];\n  } else {\n    return segments;\n  }\n};\n\nvar printRoutes = function (routes) {\n  console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n\n  var _loop_1 = function (chain) {\n    var path = [];\n    chain.forEach(function (r) {\n      return path.push.apply(path, r.path);\n    });\n    var ids = chain.map(function (r) {\n      return r.id;\n    });\n    console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n  };\n\n  for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n    var chain = routes_1[_i];\n\n    _loop_1(chain);\n  }\n\n  console.groupEnd();\n};\n\nvar printRedirects = function (redirects) {\n  console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n\n  for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n    var redirect = redirects_1[_i];\n\n    if (redirect.to) {\n      console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n    }\n  }\n\n  console.groupEnd();\n};\n\nvar writeNavState = function (root, chain, direction, index, changed) {\n  if (changed === void 0) {\n    changed = false;\n  }\n\n  return __awaiter(void 0, void 0, void 0, function () {\n    var outlet, route, result, e_1;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          _a.trys.push([0, 6,, 7]);\n\n          outlet = searchNavNode(root); // make sure we can continue interacting the DOM, otherwise abort\n\n          if (index >= chain.length || !outlet) {\n            return [2\n            /*return*/\n            , changed];\n          }\n\n          return [4\n          /*yield*/\n          , outlet.componentOnReady()];\n\n        case 1:\n          _a.sent();\n\n          route = chain[index];\n          return [4\n          /*yield*/\n          , outlet.setRouteId(route.id, route.params, direction)];\n\n        case 2:\n          result = _a.sent(); // if the outlet changed the page, reset navigation to neutral (no direction)\n          // this means nested outlets will not animate\n\n          if (result.changed) {\n            direction = ROUTER_INTENT_NONE;\n            changed = true;\n          }\n\n          return [4\n          /*yield*/\n          , writeNavState(result.element, chain, direction, index + 1, changed)];\n\n        case 3:\n          // recursively set nested outlets\n          changed = _a.sent();\n          if (!result.markVisible) return [3\n          /*break*/\n          , 5];\n          return [4\n          /*yield*/\n          , result.markVisible()];\n\n        case 4:\n          _a.sent();\n\n          _a.label = 5;\n\n        case 5:\n          return [2\n          /*return*/\n          , changed];\n\n        case 6:\n          e_1 = _a.sent();\n          console.error(e_1);\n          return [2\n          /*return*/\n          , false];\n\n        case 7:\n          return [2\n          /*return*/\n          ];\n      }\n    });\n  });\n};\n\nvar readNavState = function (root) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n      switch (_a.label) {\n        case 0:\n          ids = [];\n          node = root;\n          _a.label = 1;\n\n        case 1:\n          if (!true) return [3\n          /*break*/\n          , 5];\n          outlet = searchNavNode(node);\n          if (!outlet) return [3\n          /*break*/\n          , 3];\n          return [4\n          /*yield*/\n          , outlet.getRouteId()];\n\n        case 2:\n          id = _a.sent();\n\n          if (id) {\n            node = id.element;\n            id.element = undefined;\n            ids.push(id);\n          } else {\n            return [3\n            /*break*/\n            , 5];\n          }\n\n          return [3\n          /*break*/\n          , 4];\n\n        case 3:\n          return [3\n          /*break*/\n          , 5];\n\n        case 4:\n          return [3\n          /*break*/\n          , 1];\n\n        case 5:\n          return [2\n          /*return*/\n          , {\n            ids: ids,\n            outlet: outlet\n          }];\n      }\n    });\n  });\n};\n\nvar waitUntilNavNode = function () {\n  if (searchNavNode(document.body)) {\n    return Promise.resolve();\n  }\n\n  return new Promise(function (resolve) {\n    window.addEventListener('ionNavWillLoad', resolve, {\n      once: true\n    });\n  });\n};\n\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\n\nvar searchNavNode = function (root) {\n  if (!root) {\n    return undefined;\n  }\n\n  if (root.matches(QUERY)) {\n    return root;\n  }\n\n  var outlet = root.querySelector(QUERY);\n  return outlet ? outlet : undefined;\n};\n\nvar matchesRedirect = function (input, route) {\n  var from = route.from,\n      to = route.to;\n\n  if (to === undefined) {\n    return false;\n  }\n\n  if (from.length > input.length) {\n    return false;\n  }\n\n  for (var i = 0; i < from.length; i++) {\n    var expected = from[i];\n\n    if (expected === '*') {\n      return true;\n    }\n\n    if (expected !== input[i]) {\n      return false;\n    }\n  }\n\n  return from.length === input.length;\n};\n\nvar routeRedirect = function (path, routes) {\n  return routes.find(function (route) {\n    return matchesRedirect(path, route);\n  });\n};\n\nvar matchesIDs = function (ids, chain) {\n  var len = Math.min(ids.length, chain.length);\n  var i = 0;\n\n  for (; i < len; i++) {\n    if (ids[i].toLowerCase() !== chain[i].id) {\n      break;\n    }\n  }\n\n  return i;\n};\n\nvar matchesPath = function (inputPath, chain) {\n  var segments = new RouterSegments(inputPath);\n  var matchesDefault = false;\n  var allparams;\n\n  for (var i = 0; i < chain.length; i++) {\n    var path = chain[i].path;\n\n    if (path[0] === '') {\n      matchesDefault = true;\n    } else {\n      for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n        var segment = path_1[_i];\n        var data = segments.next(); // data param\n\n        if (segment[0] === ':') {\n          if (data === '') {\n            return null;\n          }\n\n          allparams = allparams || [];\n          var params = allparams[i] || (allparams[i] = {});\n          params[segment.slice(1)] = data;\n        } else if (data !== segment) {\n          return null;\n        }\n      }\n\n      matchesDefault = false;\n    }\n  }\n\n  var matches = matchesDefault ? matchesDefault === (segments.next() === '') : true;\n\n  if (!matches) {\n    return null;\n  }\n\n  if (allparams) {\n    return chain.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, allparams[i])\n      };\n    });\n  }\n\n  return chain;\n};\n\nvar mergeParams = function (a, b) {\n  if (!a && b) {\n    return b;\n  } else if (a && !b) {\n    return a;\n  } else if (a && b) {\n    return Object.assign(Object.assign({}, a), b);\n  }\n\n  return undefined;\n};\n\nvar routerIDsToChain = function (ids, chains) {\n  var match = null;\n  var maxMatches = 0;\n  var plainIDs = ids.map(function (i) {\n    return i.id;\n  });\n\n  for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n    var chain = chains_1[_i];\n    var score = matchesIDs(plainIDs, chain);\n\n    if (score > maxMatches) {\n      match = chain;\n      maxMatches = score;\n    }\n  }\n\n  if (match) {\n    return match.map(function (route, i) {\n      return {\n        id: route.id,\n        path: route.path,\n        params: mergeParams(route.params, ids[i] && ids[i].params)\n      };\n    });\n  }\n\n  return null;\n};\n\nvar routerPathToChain = function (path, chains) {\n  var match = null;\n  var matches = 0;\n\n  for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n    var chain = chains_2[_i];\n    var matchedChain = matchesPath(path, chain);\n\n    if (matchedChain !== null) {\n      var score = computePriority(matchedChain);\n\n      if (score > matches) {\n        matches = score;\n        match = matchedChain;\n      }\n    }\n  }\n\n  return match;\n};\n\nvar computePriority = function (chain) {\n  var score = 1;\n  var level = 1;\n\n  for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n    var route = chain_2[_i];\n\n    for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n      var path = _b[_a];\n\n      if (path[0] === ':') {\n        score += Math.pow(1, level);\n      } else if (path !== '') {\n        score += Math.pow(2, level);\n      }\n\n      level++;\n    }\n  }\n\n  return score;\n};\n\nvar RouterSegments =\n/** @class */\nfunction () {\n  function RouterSegments(path) {\n    this.path = path.slice();\n  }\n\n  RouterSegments.prototype.next = function () {\n    if (this.path.length > 0) {\n      return this.path.shift();\n    }\n\n    return '';\n  };\n\n  return RouterSegments;\n}();\n\nvar readRedirects = function (root) {\n  return Array.from(root.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE-REDIRECT';\n  }).map(function (el) {\n    var to = readProp(el, 'to');\n    return {\n      from: parsePath(readProp(el, 'from')),\n      to: to == null ? undefined : parsePath(to)\n    };\n  });\n};\n\nvar readRoutes = function (root) {\n  return flattenRouterTree(readRouteNodes(root));\n};\n\nvar readRouteNodes = function (root, node) {\n  if (node === void 0) {\n    node = root;\n  }\n\n  return Array.from(node.children).filter(function (el) {\n    return el.tagName === 'ION-ROUTE' && el.component;\n  }).map(function (el) {\n    var component = readProp(el, 'component');\n\n    if (component == null) {\n      throw new Error('component missing in ion-route');\n    }\n\n    return {\n      path: parsePath(readProp(el, 'url')),\n      id: component.toLowerCase(),\n      params: el.componentProps,\n      children: readRouteNodes(root, el)\n    };\n  });\n};\n\nvar readProp = function (el, prop) {\n  if (prop in el) {\n    return el[prop];\n  }\n\n  if (el.hasAttribute(prop)) {\n    return el.getAttribute(prop);\n  }\n\n  return null;\n};\n\nvar flattenRouterTree = function (nodes) {\n  var routes = [];\n\n  for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n    var node = nodes_1[_i];\n    flattenNode([], routes, node);\n  }\n\n  return routes;\n};\n\nvar flattenNode = function (chain, routes, node) {\n  var s = chain.slice();\n  s.push({\n    id: node.id,\n    path: node.path,\n    params: node.params\n  });\n\n  if (node.children.length === 0) {\n    routes.push(s);\n    return;\n  }\n\n  for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n    var sub = _a[_i];\n    flattenNode(s, routes, sub);\n  }\n};\n\nvar Router =\n/** @class */\nfunction () {\n  function class_1(hostRef) {\n    registerInstance(this, hostRef);\n    this.previousPath = null;\n    this.busy = false;\n    this.state = 0;\n    this.lastState = 0;\n    /**\n     * By default `ion-router` will match the routes at the root path (\"/\").\n     * That can be changed when\n     *\n     */\n\n    this.root = '/';\n    /**\n     * The router can work in two \"modes\":\n     * - With hash: `/index.html#/path/to/page`\n     * - Without hash: `/path/to/page`\n     *\n     * Using one or another might depend in the requirements of your app and/or where it's deployed.\n     *\n     * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n     * requires additional server-side configuration in order to properly work.\n     *\n     * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n     *\n     * By default, this property is `true`, change to `false` to allow hash-less URLs.\n     */\n\n    this.useHash = true;\n    this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n    this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n  }\n\n  class_1.prototype.componentWillLoad = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            console.debug('[ion-router] router will load');\n            return [4\n            /*yield*/\n            , waitUntilNavNode()];\n\n          case 1:\n            _a.sent();\n\n            console.debug('[ion-router] found nav');\n            return [4\n            /*yield*/\n            , this.onRoutesChanged()];\n\n          case 2:\n            _a.sent();\n\n            return [2\n            /*return*/\n            ];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.componentDidLoad = function () {\n    window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n    window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n  };\n\n  class_1.prototype.onPopState = function () {\n    var direction = this.historyDirection();\n    var path = this.getPath();\n    console.debug('[ion-router] URL changed -> update nav', path, direction);\n    return this.writeNavStateRoot(path, direction);\n  };\n\n  class_1.prototype.onBackButton = function (ev) {\n    var _this = this;\n\n    ev.detail.register(0, function () {\n      return _this.back();\n    });\n  };\n  /**\n   * Navigate to the specified URL.\n   *\n   * @param url The url to navigate to.\n   * @param direction The direction of the animation. Defaults to `\"forward\"`.\n   */\n\n\n  class_1.prototype.push = function (url, direction) {\n    if (direction === void 0) {\n      direction = 'forward';\n    }\n\n    if (url.startsWith('.')) {\n      url = new URL(url, window.location.href).pathname;\n    }\n\n    console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n    var path = parsePath(url);\n    this.setPath(path, direction);\n    return this.writeNavStateRoot(path, direction);\n  };\n  /**\n   * Go back to previous page in the window.history.\n   */\n\n\n  class_1.prototype.back = function () {\n    window.history.back();\n    return Promise.resolve(this.waitPromise);\n  };\n  /** @internal */\n\n\n  class_1.prototype.printDebug = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        console.debug('CURRENT PATH', this.getPath());\n        console.debug('PREVIOUS PATH', this.previousPath);\n        printRoutes(readRoutes(this.el));\n        printRedirects(readRedirects(this.el));\n        return [2\n        /*return*/\n        ];\n      });\n    });\n  };\n  /** @internal */\n\n\n  class_1.prototype.navChanged = function (direction) {\n    return __awaiter(this, void 0, void 0, function () {\n      var _a, ids, outlet, routes, chain, path;\n\n      return __generator(this, function (_b) {\n        switch (_b.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, navChanged was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            return [4\n            /*yield*/\n            , readNavState(window.document.body)];\n\n          case 1:\n            _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n            routes = readRoutes(this.el);\n            chain = routerIDsToChain(ids, routes);\n\n            if (!chain) {\n              console.warn('[ion-router] no matching URL for ', ids.map(function (i) {\n                return i.id;\n              }));\n              return [2\n              /*return*/\n              , false];\n            }\n\n            path = chainToPath(chain);\n\n            if (!path) {\n              console.warn('[ion-router] router could not match path because some required param is missing');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            console.debug('[ion-router] nav changed -> update URL', ids, path);\n            this.setPath(path, direction);\n            return [4\n            /*yield*/\n            , this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n\n          case 2:\n            _b.sent();\n\n            return [2\n            /*return*/\n            , true];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.onRedirectChanged = function () {\n    var path = this.getPath();\n\n    if (path && routeRedirect(path, readRedirects(this.el))) {\n      this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n    }\n  };\n\n  class_1.prototype.onRoutesChanged = function () {\n    return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n  };\n\n  class_1.prototype.historyDirection = function () {\n    var win = window;\n\n    if (win.history.state === null) {\n      this.state++;\n      win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n    }\n\n    var state = win.history.state;\n    var lastState = this.lastState;\n    this.lastState = state;\n\n    if (state > lastState) {\n      return ROUTER_INTENT_FORWARD;\n    } else if (state < lastState) {\n      return ROUTER_INTENT_BACK;\n    } else {\n      return ROUTER_INTENT_NONE;\n    }\n  };\n\n  class_1.prototype.writeNavStateRoot = function (path, direction) {\n    return __awaiter(this, void 0, void 0, function () {\n      var redirects, redirect, redirectFrom, routes, chain;\n      return __generator(this, function (_a) {\n        if (!path) {\n          console.error('[ion-router] URL is not part of the routing set');\n          return [2\n          /*return*/\n          , false];\n        }\n\n        redirects = readRedirects(this.el);\n        redirect = routeRedirect(path, redirects);\n        redirectFrom = null;\n\n        if (redirect) {\n          this.setPath(redirect.to, direction);\n          redirectFrom = redirect.from;\n          path = redirect.to;\n        }\n\n        routes = readRoutes(this.el);\n        chain = routerPathToChain(path, routes);\n\n        if (!chain) {\n          console.error('[ion-router] the path does not match any route');\n          return [2\n          /*return*/\n          , false];\n        } // write DOM give\n\n\n        return [2\n        /*return*/\n        , this.safeWriteNavState(document.body, chain, direction, path, redirectFrom)];\n      });\n    });\n  };\n\n  class_1.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var unlock, changed, e_2;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.lock()];\n\n          case 1:\n            unlock = _a.sent();\n            changed = false;\n            _a.label = 2;\n\n          case 2:\n            _a.trys.push([2, 4,, 5]);\n\n            return [4\n            /*yield*/\n            , this.writeNavState(node, chain, direction, path, redirectFrom, index)];\n\n          case 3:\n            changed = _a.sent();\n            return [3\n            /*break*/\n            , 5];\n\n          case 4:\n            e_2 = _a.sent();\n            console.error(e_2);\n            return [3\n            /*break*/\n            , 5];\n\n          case 5:\n            unlock();\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.lock = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      var p, resolve;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            p = this.waitPromise;\n            this.waitPromise = new Promise(function (r) {\n              return resolve = r;\n            });\n            if (!(p !== undefined)) return [3\n            /*break*/\n            , 2];\n            return [4\n            /*yield*/\n            , p];\n\n          case 1:\n            _a.sent();\n\n            _a.label = 2;\n\n          case 2:\n            return [2\n            /*return*/\n            , resolve];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return __awaiter(this, void 0, void 0, function () {\n      var routeEvent, changed;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            if (this.busy) {\n              console.warn('[ion-router] router is busy, transition was cancelled');\n              return [2\n              /*return*/\n              , false];\n            }\n\n            this.busy = true;\n            routeEvent = this.routeChangeEvent(path, redirectFrom);\n\n            if (routeEvent) {\n              this.ionRouteWillChange.emit(routeEvent);\n            }\n\n            return [4\n            /*yield*/\n            , writeNavState(node, chain, direction, index)];\n\n          case 1:\n            changed = _a.sent();\n            this.busy = false;\n\n            if (changed) {\n              console.debug('[ion-router] route changed', path);\n            } // emit did change\n\n\n            if (routeEvent) {\n              this.ionRouteDidChange.emit(routeEvent);\n            }\n\n            return [2\n            /*return*/\n            , changed];\n        }\n      });\n    });\n  };\n\n  class_1.prototype.setPath = function (path, direction) {\n    this.state++;\n    writePath(window.history, this.root, this.useHash, path, direction, this.state);\n  };\n\n  class_1.prototype.getPath = function () {\n    return readPath(window.location, this.root, this.useHash);\n  };\n\n  class_1.prototype.routeChangeEvent = function (path, redirectFromPath) {\n    var from = this.previousPath;\n    var to = generatePath(path);\n    this.previousPath = to;\n\n    if (to === from) {\n      return null;\n    }\n\n    var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n    return {\n      from: from,\n      redirectedFrom: redirectedFrom,\n      to: to\n    };\n  };\n\n  Object.defineProperty(class_1.prototype, \"el\", {\n    get: function () {\n      return getElement(this);\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return class_1;\n}();\n\nvar RouterLink =\n/** @class */\nfunction () {\n  function RouterLink(hostRef) {\n    var _this = this;\n\n    registerInstance(this, hostRef);\n    /**\n     * When using a router, it specifies the transition direction when navigating to\n     * another page using `href`.\n     */\n\n    this.routerDirection = 'forward';\n\n    this.onClick = function (ev) {\n      openURL(_this.href, ev, _this.routerDirection);\n    };\n  }\n\n  RouterLink.prototype.render = function () {\n    var _a;\n\n    var mode = getIonMode(this);\n    var attrs = {\n      href: this.href,\n      rel: this.rel,\n      target: this.target\n    };\n    return h(Host, {\n      onClick: this.onClick,\n      class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a))\n    }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null)));\n  };\n\n  Object.defineProperty(RouterLink, \"style\", {\n    get: function () {\n      return \":host{--background:transparent;--color:var(--ion-color-primary,#3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\";\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return RouterLink;\n}();\n\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };","map":{"version":3,"sources":["/home/joao/Desktop/Projeto-LI4/li4_umfit/UMFit-WebApp/UMFit-Client/UMFit-App/node_modules/@ionic/core/dist/esm-es5/ion-route_4.entry.js"],"names":["__awaiter","__generator","__spreadArrays","r","registerInstance","d","createEvent","e","getElement","c","getIonMode","h","H","Host","debounce","o","openURL","createColorClasses","Route","hostRef","url","ionRouteDataChanged","prototype","onUpdate","newValue","emit","onComponentProps","oldValue","keys1","Object","keys","keys2","length","_i","keys1_1","key","connectedCallback","defineProperty","get","enumerable","configurable","RouteRedirect","ionRouteRedirectChanged","propDidChange","ROUTER_INTENT_NONE","ROUTER_INTENT_FORWARD","ROUTER_INTENT_BACK","generatePath","segments","path","filter","s","join","chainToPath","chain","chain_1","route","_a","_b","segment","param","params","slice","push","writePath","history","root","useHash","direction","state","parsePath","pushState","replaceState","removePrefix","prefix","i","readPath","loc","pathname","hash","split","map","trim","printRoutes","routes","console","group","_loop_1","forEach","apply","ids","id","debug","routes_1","groupEnd","printRedirects","redirects","redirects_1","redirect","to","from","writeNavState","index","changed","outlet","result","e_1","label","trys","searchNavNode","componentOnReady","sent","setRouteId","element","markVisible","error","readNavState","node","getRouteId","undefined","waitUntilNavNode","document","body","Promise","resolve","window","addEventListener","once","QUERY","matches","querySelector","matchesRedirect","input","expected","routeRedirect","find","matchesIDs","len","Math","min","toLowerCase","matchesPath","inputPath","RouterSegments","matchesDefault","allparams","path_1","data","next","mergeParams","a","b","assign","routerIDsToChain","chains","match","maxMatches","plainIDs","chains_1","score","routerPathToChain","chains_2","matchedChain","computePriority","level","chain_2","pow","shift","readRedirects","Array","children","el","tagName","readProp","readRoutes","flattenRouterTree","readRouteNodes","component","Error","componentProps","prop","hasAttribute","getAttribute","nodes","nodes_1","flattenNode","sub","Router","class_1","previousPath","busy","lastState","ionRouteWillChange","ionRouteDidChange","componentWillLoad","onRoutesChanged","componentDidLoad","onRedirectChanged","bind","onPopState","historyDirection","getPath","writeNavStateRoot","onBackButton","ev","_this","detail","register","back","startsWith","URL","location","href","setPath","waitPromise","printDebug","navChanged","warn","safeWriteNavState","win","title","redirectFrom","unlock","e_2","lock","p","routeEvent","routeChangeEvent","redirectFromPath","redirectedFrom","RouterLink","routerDirection","onClick","render","mode","attrs","rel","target","class","color","ion_route","ion_route_redirect","ion_router","ion_router_link"],"mappings":"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","sourcesContent":["import { __awaiter, __generator, __spreadArrays } from \"tslib\";\nimport { r as registerInstance, d as createEvent, e as getElement, c as getIonMode, h, H as Host } from './core-0a8d4d2e.js';\nimport './config-3c7f3790.js';\nimport { e as debounce } from './helpers-46f4a262.js';\nimport { o as openURL, c as createColorClasses } from './theme-18cbe2cc.js';\nvar Route = /** @class */ (function () {\n    function Route(hostRef) {\n        registerInstance(this, hostRef);\n        /**\n         * Relative path that needs to match in order for this route to apply.\n         *\n         * Accepts paths similar to expressjs so that you can define parameters\n         * in the url /foo/:bar where bar would be available in incoming props.\n         */\n        this.url = '';\n        this.ionRouteDataChanged = createEvent(this, \"ionRouteDataChanged\", 7);\n    }\n    Route.prototype.onUpdate = function (newValue) {\n        this.ionRouteDataChanged.emit(newValue);\n    };\n    Route.prototype.onComponentProps = function (newValue, oldValue) {\n        if (newValue === oldValue) {\n            return;\n        }\n        var keys1 = newValue ? Object.keys(newValue) : [];\n        var keys2 = oldValue ? Object.keys(oldValue) : [];\n        if (keys1.length !== keys2.length) {\n            this.onUpdate(newValue);\n            return;\n        }\n        for (var _i = 0, keys1_1 = keys1; _i < keys1_1.length; _i++) {\n            var key = keys1_1[_i];\n            if (newValue[key] !== oldValue[key]) {\n                this.onUpdate(newValue);\n                return;\n            }\n        }\n    };\n    Route.prototype.connectedCallback = function () {\n        this.ionRouteDataChanged.emit();\n    };\n    Object.defineProperty(Route, \"watchers\", {\n        get: function () {\n            return {\n                \"url\": [\"onUpdate\"],\n                \"component\": [\"onUpdate\"],\n                \"componentProps\": [\"onComponentProps\"]\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return Route;\n}());\nvar RouteRedirect = /** @class */ (function () {\n    function RouteRedirect(hostRef) {\n        registerInstance(this, hostRef);\n        this.ionRouteRedirectChanged = createEvent(this, \"ionRouteRedirectChanged\", 7);\n    }\n    RouteRedirect.prototype.propDidChange = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    RouteRedirect.prototype.connectedCallback = function () {\n        this.ionRouteRedirectChanged.emit();\n    };\n    Object.defineProperty(RouteRedirect, \"watchers\", {\n        get: function () {\n            return {\n                \"from\": [\"propDidChange\"],\n                \"to\": [\"propDidChange\"]\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    return RouteRedirect;\n}());\nvar ROUTER_INTENT_NONE = 'root';\nvar ROUTER_INTENT_FORWARD = 'forward';\nvar ROUTER_INTENT_BACK = 'back';\nvar generatePath = function (segments) {\n    var path = segments\n        .filter(function (s) { return s.length > 0; })\n        .join('/');\n    return '/' + path;\n};\nvar chainToPath = function (chain) {\n    var path = [];\n    for (var _i = 0, chain_1 = chain; _i < chain_1.length; _i++) {\n        var route = chain_1[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var segment = _b[_a];\n            if (segment[0] === ':') {\n                var param = route.params && route.params[segment.slice(1)];\n                if (!param) {\n                    return null;\n                }\n                path.push(param);\n            }\n            else if (segment !== '') {\n                path.push(segment);\n            }\n        }\n    }\n    return path;\n};\nvar writePath = function (history, root, useHash, path, direction, state) {\n    var url = generatePath(__spreadArrays(parsePath(root), path));\n    if (useHash) {\n        url = '#' + url;\n    }\n    if (direction === ROUTER_INTENT_FORWARD) {\n        history.pushState(state, '', url);\n    }\n    else {\n        history.replaceState(state, '', url);\n    }\n};\nvar removePrefix = function (prefix, path) {\n    if (prefix.length > path.length) {\n        return null;\n    }\n    if (prefix.length <= 1 && prefix[0] === '') {\n        return path;\n    }\n    for (var i = 0; i < prefix.length; i++) {\n        if (prefix[i].length > 0 && prefix[i] !== path[i]) {\n            return null;\n        }\n    }\n    if (path.length === prefix.length) {\n        return [''];\n    }\n    return path.slice(prefix.length);\n};\nvar readPath = function (loc, root, useHash) {\n    var pathname = loc.pathname;\n    if (useHash) {\n        var hash = loc.hash;\n        pathname = (hash[0] === '#')\n            ? hash.slice(1)\n            : '';\n    }\n    var prefix = parsePath(root);\n    var path = parsePath(pathname);\n    return removePrefix(prefix, path);\n};\nvar parsePath = function (path) {\n    if (path == null) {\n        return [''];\n    }\n    var segments = path.split('/')\n        .map(function (s) { return s.trim(); })\n        .filter(function (s) { return s.length > 0; });\n    if (segments.length === 0) {\n        return [''];\n    }\n    else {\n        return segments;\n    }\n};\nvar printRoutes = function (routes) {\n    console.group(\"[ion-core] ROUTES[\" + routes.length + \"]\");\n    var _loop_1 = function (chain) {\n        var path = [];\n        chain.forEach(function (r) { return path.push.apply(path, r.path); });\n        var ids = chain.map(function (r) { return r.id; });\n        console.debug(\"%c \" + generatePath(path), 'font-weight: bold; padding-left: 20px', '=>\\t', \"(\" + ids.join(', ') + \")\");\n    };\n    for (var _i = 0, routes_1 = routes; _i < routes_1.length; _i++) {\n        var chain = routes_1[_i];\n        _loop_1(chain);\n    }\n    console.groupEnd();\n};\nvar printRedirects = function (redirects) {\n    console.group(\"[ion-core] REDIRECTS[\" + redirects.length + \"]\");\n    for (var _i = 0, redirects_1 = redirects; _i < redirects_1.length; _i++) {\n        var redirect = redirects_1[_i];\n        if (redirect.to) {\n            console.debug('FROM: ', \"$c \" + generatePath(redirect.from), 'font-weight: bold', ' TO: ', \"$c \" + generatePath(redirect.to), 'font-weight: bold');\n        }\n    }\n    console.groupEnd();\n};\nvar writeNavState = function (root, chain, direction, index, changed) {\n    if (changed === void 0) { changed = false; }\n    return __awaiter(void 0, void 0, void 0, function () {\n        var outlet, route, result, e_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 6, , 7]);\n                    outlet = searchNavNode(root);\n                    // make sure we can continue interacting the DOM, otherwise abort\n                    if (index >= chain.length || !outlet) {\n                        return [2 /*return*/, changed];\n                    }\n                    return [4 /*yield*/, outlet.componentOnReady()];\n                case 1:\n                    _a.sent();\n                    route = chain[index];\n                    return [4 /*yield*/, outlet.setRouteId(route.id, route.params, direction)];\n                case 2:\n                    result = _a.sent();\n                    // if the outlet changed the page, reset navigation to neutral (no direction)\n                    // this means nested outlets will not animate\n                    if (result.changed) {\n                        direction = ROUTER_INTENT_NONE;\n                        changed = true;\n                    }\n                    return [4 /*yield*/, writeNavState(result.element, chain, direction, index + 1, changed)];\n                case 3:\n                    // recursively set nested outlets\n                    changed = _a.sent();\n                    if (!result.markVisible) return [3 /*break*/, 5];\n                    return [4 /*yield*/, result.markVisible()];\n                case 4:\n                    _a.sent();\n                    _a.label = 5;\n                case 5: return [2 /*return*/, changed];\n                case 6:\n                    e_1 = _a.sent();\n                    console.error(e_1);\n                    return [2 /*return*/, false];\n                case 7: return [2 /*return*/];\n            }\n        });\n    });\n};\nvar readNavState = function (root) { return __awaiter(void 0, void 0, void 0, function () {\n    var ids, outlet, node, id;\n    return __generator(this, function (_a) {\n        switch (_a.label) {\n            case 0:\n                ids = [];\n                node = root;\n                _a.label = 1;\n            case 1:\n                if (!true) return [3 /*break*/, 5];\n                outlet = searchNavNode(node);\n                if (!outlet) return [3 /*break*/, 3];\n                return [4 /*yield*/, outlet.getRouteId()];\n            case 2:\n                id = _a.sent();\n                if (id) {\n                    node = id.element;\n                    id.element = undefined;\n                    ids.push(id);\n                }\n                else {\n                    return [3 /*break*/, 5];\n                }\n                return [3 /*break*/, 4];\n            case 3: return [3 /*break*/, 5];\n            case 4: return [3 /*break*/, 1];\n            case 5: return [2 /*return*/, { ids: ids, outlet: outlet }];\n        }\n    });\n}); };\nvar waitUntilNavNode = function () {\n    if (searchNavNode(document.body)) {\n        return Promise.resolve();\n    }\n    return new Promise(function (resolve) {\n        window.addEventListener('ionNavWillLoad', resolve, { once: true });\n    });\n};\nvar QUERY = ':not([no-router]) ion-nav, :not([no-router]) ion-tabs, :not([no-router]) ion-router-outlet';\nvar searchNavNode = function (root) {\n    if (!root) {\n        return undefined;\n    }\n    if (root.matches(QUERY)) {\n        return root;\n    }\n    var outlet = root.querySelector(QUERY);\n    return outlet ? outlet : undefined;\n};\nvar matchesRedirect = function (input, route) {\n    var from = route.from, to = route.to;\n    if (to === undefined) {\n        return false;\n    }\n    if (from.length > input.length) {\n        return false;\n    }\n    for (var i = 0; i < from.length; i++) {\n        var expected = from[i];\n        if (expected === '*') {\n            return true;\n        }\n        if (expected !== input[i]) {\n            return false;\n        }\n    }\n    return from.length === input.length;\n};\nvar routeRedirect = function (path, routes) {\n    return routes.find(function (route) { return matchesRedirect(path, route); });\n};\nvar matchesIDs = function (ids, chain) {\n    var len = Math.min(ids.length, chain.length);\n    var i = 0;\n    for (; i < len; i++) {\n        if (ids[i].toLowerCase() !== chain[i].id) {\n            break;\n        }\n    }\n    return i;\n};\nvar matchesPath = function (inputPath, chain) {\n    var segments = new RouterSegments(inputPath);\n    var matchesDefault = false;\n    var allparams;\n    for (var i = 0; i < chain.length; i++) {\n        var path = chain[i].path;\n        if (path[0] === '') {\n            matchesDefault = true;\n        }\n        else {\n            for (var _i = 0, path_1 = path; _i < path_1.length; _i++) {\n                var segment = path_1[_i];\n                var data = segments.next();\n                // data param\n                if (segment[0] === ':') {\n                    if (data === '') {\n                        return null;\n                    }\n                    allparams = allparams || [];\n                    var params = allparams[i] || (allparams[i] = {});\n                    params[segment.slice(1)] = data;\n                }\n                else if (data !== segment) {\n                    return null;\n                }\n            }\n            matchesDefault = false;\n        }\n    }\n    var matches = (matchesDefault)\n        ? matchesDefault === (segments.next() === '')\n        : true;\n    if (!matches) {\n        return null;\n    }\n    if (allparams) {\n        return chain.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, allparams[i])\n        }); });\n    }\n    return chain;\n};\nvar mergeParams = function (a, b) {\n    if (!a && b) {\n        return b;\n    }\n    else if (a && !b) {\n        return a;\n    }\n    else if (a && b) {\n        return Object.assign(Object.assign({}, a), b);\n    }\n    return undefined;\n};\nvar routerIDsToChain = function (ids, chains) {\n    var match = null;\n    var maxMatches = 0;\n    var plainIDs = ids.map(function (i) { return i.id; });\n    for (var _i = 0, chains_1 = chains; _i < chains_1.length; _i++) {\n        var chain = chains_1[_i];\n        var score = matchesIDs(plainIDs, chain);\n        if (score > maxMatches) {\n            match = chain;\n            maxMatches = score;\n        }\n    }\n    if (match) {\n        return match.map(function (route, i) { return ({\n            id: route.id,\n            path: route.path,\n            params: mergeParams(route.params, ids[i] && ids[i].params)\n        }); });\n    }\n    return null;\n};\nvar routerPathToChain = function (path, chains) {\n    var match = null;\n    var matches = 0;\n    for (var _i = 0, chains_2 = chains; _i < chains_2.length; _i++) {\n        var chain = chains_2[_i];\n        var matchedChain = matchesPath(path, chain);\n        if (matchedChain !== null) {\n            var score = computePriority(matchedChain);\n            if (score > matches) {\n                matches = score;\n                match = matchedChain;\n            }\n        }\n    }\n    return match;\n};\nvar computePriority = function (chain) {\n    var score = 1;\n    var level = 1;\n    for (var _i = 0, chain_2 = chain; _i < chain_2.length; _i++) {\n        var route = chain_2[_i];\n        for (var _a = 0, _b = route.path; _a < _b.length; _a++) {\n            var path = _b[_a];\n            if (path[0] === ':') {\n                score += Math.pow(1, level);\n            }\n            else if (path !== '') {\n                score += Math.pow(2, level);\n            }\n            level++;\n        }\n    }\n    return score;\n};\nvar RouterSegments = /** @class */ (function () {\n    function RouterSegments(path) {\n        this.path = path.slice();\n    }\n    RouterSegments.prototype.next = function () {\n        if (this.path.length > 0) {\n            return this.path.shift();\n        }\n        return '';\n    };\n    return RouterSegments;\n}());\nvar readRedirects = function (root) {\n    return Array.from(root.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE-REDIRECT'; })\n        .map(function (el) {\n        var to = readProp(el, 'to');\n        return {\n            from: parsePath(readProp(el, 'from')),\n            to: to == null ? undefined : parsePath(to),\n        };\n    });\n};\nvar readRoutes = function (root) {\n    return flattenRouterTree(readRouteNodes(root));\n};\nvar readRouteNodes = function (root, node) {\n    if (node === void 0) { node = root; }\n    return Array.from(node.children)\n        .filter(function (el) { return el.tagName === 'ION-ROUTE' && el.component; })\n        .map(function (el) {\n        var component = readProp(el, 'component');\n        if (component == null) {\n            throw new Error('component missing in ion-route');\n        }\n        return {\n            path: parsePath(readProp(el, 'url')),\n            id: component.toLowerCase(),\n            params: el.componentProps,\n            children: readRouteNodes(root, el)\n        };\n    });\n};\nvar readProp = function (el, prop) {\n    if (prop in el) {\n        return el[prop];\n    }\n    if (el.hasAttribute(prop)) {\n        return el.getAttribute(prop);\n    }\n    return null;\n};\nvar flattenRouterTree = function (nodes) {\n    var routes = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var node = nodes_1[_i];\n        flattenNode([], routes, node);\n    }\n    return routes;\n};\nvar flattenNode = function (chain, routes, node) {\n    var s = chain.slice();\n    s.push({\n        id: node.id,\n        path: node.path,\n        params: node.params\n    });\n    if (node.children.length === 0) {\n        routes.push(s);\n        return;\n    }\n    for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n        var sub = _a[_i];\n        flattenNode(s, routes, sub);\n    }\n};\nvar Router = /** @class */ (function () {\n    function class_1(hostRef) {\n        registerInstance(this, hostRef);\n        this.previousPath = null;\n        this.busy = false;\n        this.state = 0;\n        this.lastState = 0;\n        /**\n         * By default `ion-router` will match the routes at the root path (\"/\").\n         * That can be changed when\n         *\n         */\n        this.root = '/';\n        /**\n         * The router can work in two \"modes\":\n         * - With hash: `/index.html#/path/to/page`\n         * - Without hash: `/path/to/page`\n         *\n         * Using one or another might depend in the requirements of your app and/or where it's deployed.\n         *\n         * Usually \"hash-less\" navigation works better for SEO and it's more user friendly too, but it might\n         * requires additional server-side configuration in order to properly work.\n         *\n         * On the otherside hash-navigation is much easier to deploy, it even works over the file protocol.\n         *\n         * By default, this property is `true`, change to `false` to allow hash-less URLs.\n         */\n        this.useHash = true;\n        this.ionRouteWillChange = createEvent(this, \"ionRouteWillChange\", 7);\n        this.ionRouteDidChange = createEvent(this, \"ionRouteDidChange\", 7);\n    }\n    class_1.prototype.componentWillLoad = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        console.debug('[ion-router] router will load');\n                        return [4 /*yield*/, waitUntilNavNode()];\n                    case 1:\n                        _a.sent();\n                        console.debug('[ion-router] found nav');\n                        return [4 /*yield*/, this.onRoutesChanged()];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    class_1.prototype.componentDidLoad = function () {\n        window.addEventListener('ionRouteRedirectChanged', debounce(this.onRedirectChanged.bind(this), 10));\n        window.addEventListener('ionRouteDataChanged', debounce(this.onRoutesChanged.bind(this), 100));\n    };\n    class_1.prototype.onPopState = function () {\n        var direction = this.historyDirection();\n        var path = this.getPath();\n        console.debug('[ion-router] URL changed -> update nav', path, direction);\n        return this.writeNavStateRoot(path, direction);\n    };\n    class_1.prototype.onBackButton = function (ev) {\n        var _this = this;\n        ev.detail.register(0, function () { return _this.back(); });\n    };\n    /**\n     * Navigate to the specified URL.\n     *\n     * @param url The url to navigate to.\n     * @param direction The direction of the animation. Defaults to `\"forward\"`.\n     */\n    class_1.prototype.push = function (url, direction) {\n        if (direction === void 0) { direction = 'forward'; }\n        if (url.startsWith('.')) {\n            url = (new URL(url, window.location.href)).pathname;\n        }\n        console.debug('[ion-router] URL pushed -> updating nav', url, direction);\n        var path = parsePath(url);\n        this.setPath(path, direction);\n        return this.writeNavStateRoot(path, direction);\n    };\n    /**\n     * Go back to previous page in the window.history.\n     */\n    class_1.prototype.back = function () {\n        window.history.back();\n        return Promise.resolve(this.waitPromise);\n    };\n    /** @internal */\n    class_1.prototype.printDebug = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                console.debug('CURRENT PATH', this.getPath());\n                console.debug('PREVIOUS PATH', this.previousPath);\n                printRoutes(readRoutes(this.el));\n                printRedirects(readRedirects(this.el));\n                return [2 /*return*/];\n            });\n        });\n    };\n    /** @internal */\n    class_1.prototype.navChanged = function (direction) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, ids, outlet, routes, chain, path;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, navChanged was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        return [4 /*yield*/, readNavState(window.document.body)];\n                    case 1:\n                        _a = _b.sent(), ids = _a.ids, outlet = _a.outlet;\n                        routes = readRoutes(this.el);\n                        chain = routerIDsToChain(ids, routes);\n                        if (!chain) {\n                            console.warn('[ion-router] no matching URL for ', ids.map(function (i) { return i.id; }));\n                            return [2 /*return*/, false];\n                        }\n                        path = chainToPath(chain);\n                        if (!path) {\n                            console.warn('[ion-router] router could not match path because some required param is missing');\n                            return [2 /*return*/, false];\n                        }\n                        console.debug('[ion-router] nav changed -> update URL', ids, path);\n                        this.setPath(path, direction);\n                        return [4 /*yield*/, this.safeWriteNavState(outlet, chain, ROUTER_INTENT_NONE, path, null, ids.length)];\n                    case 2:\n                        _b.sent();\n                        return [2 /*return*/, true];\n                }\n            });\n        });\n    };\n    class_1.prototype.onRedirectChanged = function () {\n        var path = this.getPath();\n        if (path && routeRedirect(path, readRedirects(this.el))) {\n            this.writeNavStateRoot(path, ROUTER_INTENT_NONE);\n        }\n    };\n    class_1.prototype.onRoutesChanged = function () {\n        return this.writeNavStateRoot(this.getPath(), ROUTER_INTENT_NONE);\n    };\n    class_1.prototype.historyDirection = function () {\n        var win = window;\n        if (win.history.state === null) {\n            this.state++;\n            win.history.replaceState(this.state, win.document.title, win.document.location && win.document.location.href);\n        }\n        var state = win.history.state;\n        var lastState = this.lastState;\n        this.lastState = state;\n        if (state > lastState) {\n            return ROUTER_INTENT_FORWARD;\n        }\n        else if (state < lastState) {\n            return ROUTER_INTENT_BACK;\n        }\n        else {\n            return ROUTER_INTENT_NONE;\n        }\n    };\n    class_1.prototype.writeNavStateRoot = function (path, direction) {\n        return __awaiter(this, void 0, void 0, function () {\n            var redirects, redirect, redirectFrom, routes, chain;\n            return __generator(this, function (_a) {\n                if (!path) {\n                    console.error('[ion-router] URL is not part of the routing set');\n                    return [2 /*return*/, false];\n                }\n                redirects = readRedirects(this.el);\n                redirect = routeRedirect(path, redirects);\n                redirectFrom = null;\n                if (redirect) {\n                    this.setPath(redirect.to, direction);\n                    redirectFrom = redirect.from;\n                    path = redirect.to;\n                }\n                routes = readRoutes(this.el);\n                chain = routerPathToChain(path, routes);\n                if (!chain) {\n                    console.error('[ion-router] the path does not match any route');\n                    return [2 /*return*/, false];\n                }\n                // write DOM give\n                return [2 /*return*/, this.safeWriteNavState(document.body, chain, direction, path, redirectFrom)];\n            });\n        });\n    };\n    class_1.prototype.safeWriteNavState = function (node, chain, direction, path, redirectFrom, index) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var unlock, changed, e_2;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, this.lock()];\n                    case 1:\n                        unlock = _a.sent();\n                        changed = false;\n                        _a.label = 2;\n                    case 2:\n                        _a.trys.push([2, 4, , 5]);\n                        return [4 /*yield*/, this.writeNavState(node, chain, direction, path, redirectFrom, index)];\n                    case 3:\n                        changed = _a.sent();\n                        return [3 /*break*/, 5];\n                    case 4:\n                        e_2 = _a.sent();\n                        console.error(e_2);\n                        return [3 /*break*/, 5];\n                    case 5:\n                        unlock();\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    class_1.prototype.lock = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var p, resolve;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        p = this.waitPromise;\n                        this.waitPromise = new Promise(function (r) { return resolve = r; });\n                        if (!(p !== undefined)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, p];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2: return [2 /*return*/, resolve];\n                }\n            });\n        });\n    };\n    class_1.prototype.writeNavState = function (node, chain, direction, path, redirectFrom, index) {\n        if (index === void 0) { index = 0; }\n        return __awaiter(this, void 0, void 0, function () {\n            var routeEvent, changed;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        if (this.busy) {\n                            console.warn('[ion-router] router is busy, transition was cancelled');\n                            return [2 /*return*/, false];\n                        }\n                        this.busy = true;\n                        routeEvent = this.routeChangeEvent(path, redirectFrom);\n                        if (routeEvent) {\n                            this.ionRouteWillChange.emit(routeEvent);\n                        }\n                        return [4 /*yield*/, writeNavState(node, chain, direction, index)];\n                    case 1:\n                        changed = _a.sent();\n                        this.busy = false;\n                        if (changed) {\n                            console.debug('[ion-router] route changed', path);\n                        }\n                        // emit did change\n                        if (routeEvent) {\n                            this.ionRouteDidChange.emit(routeEvent);\n                        }\n                        return [2 /*return*/, changed];\n                }\n            });\n        });\n    };\n    class_1.prototype.setPath = function (path, direction) {\n        this.state++;\n        writePath(window.history, this.root, this.useHash, path, direction, this.state);\n    };\n    class_1.prototype.getPath = function () {\n        return readPath(window.location, this.root, this.useHash);\n    };\n    class_1.prototype.routeChangeEvent = function (path, redirectFromPath) {\n        var from = this.previousPath;\n        var to = generatePath(path);\n        this.previousPath = to;\n        if (to === from) {\n            return null;\n        }\n        var redirectedFrom = redirectFromPath ? generatePath(redirectFromPath) : null;\n        return {\n            from: from,\n            redirectedFrom: redirectedFrom,\n            to: to,\n        };\n    };\n    Object.defineProperty(class_1.prototype, \"el\", {\n        get: function () { return getElement(this); },\n        enumerable: true,\n        configurable: true\n    });\n    return class_1;\n}());\nvar RouterLink = /** @class */ (function () {\n    function RouterLink(hostRef) {\n        var _this = this;\n        registerInstance(this, hostRef);\n        /**\n         * When using a router, it specifies the transition direction when navigating to\n         * another page using `href`.\n         */\n        this.routerDirection = 'forward';\n        this.onClick = function (ev) {\n            openURL(_this.href, ev, _this.routerDirection);\n        };\n    }\n    RouterLink.prototype.render = function () {\n        var _a;\n        var mode = getIonMode(this);\n        var attrs = {\n            href: this.href,\n            rel: this.rel,\n            target: this.target\n        };\n        return (h(Host, { onClick: this.onClick, class: Object.assign(Object.assign({}, createColorClasses(this.color)), (_a = {}, _a[mode] = true, _a['ion-activatable'] = true, _a)) }, h(\"a\", Object.assign({}, attrs), h(\"slot\", null))));\n    };\n    Object.defineProperty(RouterLink, \"style\", {\n        get: function () { return \":host{--background:transparent;--color:var(--ion-color-primary,#3880ff);background:var(--background);color:var(--color)}:host(.ion-color){color:var(--ion-color-base)}a{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return RouterLink;\n}());\nexport { Route as ion_route, RouteRedirect as ion_route_redirect, Router as ion_router, RouterLink as ion_router_link };\n"]},"metadata":{},"sourceType":"module"}